<!DOCTYPE html>
<html>

<head>
    <title>JavaScript Aula 21</title>
    <script>
    //https://flaviocopes.com/fetch-api/
    //https://scotch.io/tutorials/how-to-use-the-javascript-fetch-api-to-get-data

    var jsonMessagte;
        
    function pageSetup() {
        console.log("Page setup...");
    }   

    function showMessage(message){
        document.getElementById("codeBox").innerHTML = JSON.stringify(message);
    }

    function callApi() {
        
        var gitUserName = document.getElementById("gitUserName").value;
        var url = 'https://api.github.com/users/' + gitUserName;

        fetch(url) // Call the fetch function passing the url of the API as a parameter
            .then(response => response.json())
            //.then(data => document.getElementById('codeBox').innerHTML = data)
            .then(data => showMessage(data))
            .catch(function(error) {
                // This is where you run code if the server returns any errors
                console.log(error);
            });
                         
    }
    </script>
    <style>
    </style>

</head>

<body onload="pageSetup();">
    
    <h1>JavaScript Aula 21</h1>
    <h2>Arrow Function</h2>
    <p><label>GitHub user: </label><input type="text" id="gitUserName" required value="danielscarvalho"></p>
    <button onclick="callApi();">Call API</button>
    <hr>
    <p id="codeBox">
    </p>

</body>

</html>
